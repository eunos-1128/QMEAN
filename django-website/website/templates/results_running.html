{% extends 'results_base.html' %}{% load static %}

{% block results_block %}

<div class="alert alert-success text-center" role="alert" style="font-size:1.4em">
<small>The job is currently</small> <span class="job_status">{{ status|upper }}.</span>
</div>
{% endblock %}
{% block js %}
<script>

$(document).ready( 
	function()
	{ 
		glow(0);
		setTimeout(function(){ checkStatus(); },5000);
	});
var inc = +1;
function glow(x)
{
  	if(x>240)
  		inc = -1;
  	else if(x<50)
  		inc = +1;
  	x+= (inc*30);
	$('.job_status').css('text-shadow','0 0 0.2em rgb('+x+','+x+','+x+'), 0 0 0 #FFF');
	setTimeout(function(){ glow(x); },100);
}
function checkStatus()
{
	$.ajax('{% url 'project_status' projectid=projectid %}', {
      success: function(data) {
      	if(data.status=='COMPLETED' || data.status=='FAILED')
      		location.reload();
      },
      error: function(error) {
         console.info(error)
      }
   });
	setTimeout(function(){ checkStatus(); },5000);
}



</script>
{% endblock %}